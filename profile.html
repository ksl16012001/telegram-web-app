<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile - Nạp Coin</title>
    <link rel="stylesheet" href="styles.css"> <!-- Liên kết đến file styles.css -->
    <script src="script.js" defer></script>
</head>
<body id="profile-page">
    <div class="container">
        <div class="header">
            <h2>Trang Cá Nhân</h2>
        </div>
        
        <!-- Thông tin người dùng -->
        <div class="profile-info">
            <h3>Thông tin người dùng</h3>
            <p><strong>Tên người dùng:</strong> <span id="username">Chưa đăng nhập</span></p>
            <p><strong>Số dư TON:</strong> <span id="balance">0</span> TON</p>
            <p><strong>Địa chỉ ví:</strong> <span id="walletAddress">Chưa có ví</span></p>
        </div>
        
        <!-- Nút nạp coin -->
        <div class="deposit-section">
            <h3>Nạp Coin</h3>
            <label for="depositAmount">Nhập số tiền bạn muốn nạp (TON): </label>
            <input type="number" id="depositAmount" placeholder="Số lượng TON" min="0" step="any">
            <button id="depositButton" onclick="initiateDeposit()">Nạp Coin</button>
        </div>
        
        <!-- Footer -->
        <footer class="footer">
            <div onclick="goBack()">Back</div>
            <div>Games</div>
            <div>Home</div>
            <div>Top</div>
            <div>Profile</div>
        </footer>
    </div>

    <script>
        async function goBack() {
            window.history.back(); // Quay lại trang trước trong lịch sử trình duyệt
        }

        // Khởi tạo quá trình nạp coin
        async function initiateDeposit() {
            const amountToDeposit = document.getElementById('depositAmount').value;
            const amount = parseFloat(amountToDeposit);

            if (isNaN(amount) || amount <= 0) {
                alert('Số tiền nạp không hợp lệ!');
                return;
            }

            // Địa chỉ ví nhận thanh toán (có thể thay thế bằng địa chỉ của bạn)
            const recipientAddress = 'UQDUIxkuAb8xjWpRQVyxGse3L3zN6dbmgUG1OK2M0EQdkxDg'; // Thay 'TON_ADDRESS' bằng địa chỉ ví của bạn
            
            // Tạo deep link cho TonKeeper
            const deepLink = `tonkeeper://transfer?to=${recipientAddress}&amount=${amount * 1e9}&sendMode=3&payload=Charge`;

            // Mở deep link để chuyển hướng đến TonKeeper
            window.location.href = deepLink;

            // Hiển thị thông báo sau khi chuyển hướng
            alert(`Đang chuyển hướng bạn tới TonKeeper để nạp ${amount} TON.`);
        }

        // Cập nhật thông tin ví người dùng (nếu cần)
        async function updateBalance() {
            // Logic để cập nhật lại số dư, ví và tên người dùng nếu cần
            document.getElementById('walletAddress').textContent = '0x123456789ABCDEF'; // Ví dụ ví
            document.getElementById('balance').textContent = '100'; // Ví dụ số dư
            document.getElementById('username').textContent = '0x1234...'; // Ví dụ tên người dùng
        }

        // Gọi hàm cập nhật thông tin ví khi trang tải
        window.onload = updateBalance;
    </script>
</body>
</html>
